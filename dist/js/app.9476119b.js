(function(t){function e(e){for(var s,i,o=e[0],l=e[1],c=e[2],u=0,m=[];u<o.length;u++)i=o[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},n={app:0},r=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0438":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e),a.d(e,"db",(function(){return Bt})),a.d(e,"TimeStamp",(function(){return Ht})),a.d(e,"GeoPoint",(function(){return Vt}));a("45fc"),a("e623"),a("e379"),a("5dc8"),a("37e1");var s=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("MainApp")],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-4 offset-md-4"},[a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"card-body"},[a("div",{staticClass:"needs-validation"},[a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row mx-2"},[a("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email address")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.$v.email.$error,"is-valid":!t.$v.email.$invalid},attrs:{placeholder:"Email",id:"exampleInputEmail1",name:"email",type:"email"},domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.email.email?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("invalid email")]),t.$v.email.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Email required")])]),a("div",{staticClass:"form-group row mx-2"},[a("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.password.$model,expression:"$v.password.$model",modifiers:{trim:!0}}],staticClass:"form-control ",class:{"is-invalid":t.$v.password.$error,"is-valid":!t.$v.password.$invalid},attrs:{id:"exampleInputPassword1",placeholder:"Password",name:"password",type:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.password.minLength?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("min length is 6 character")]),t.$v.password.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Password required")])]),a("button",{staticClass:"btn btn-warning btn-block  text-center",attrs:{type:"submit"}},[this.isLoading?a("span",{staticClass:"spinner-border text-light",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("span",[t._v("Sign In")])])])])])])])])])},o=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"text-center"},[s("img",{staticClass:"rounded-circle",attrs:{src:a("cf05"),width:"180",height:"180"}})])])}],l=a("b5ae"),c=a("d4ec"),d=a("bee2"),u=function(){function t(){Object(c["a"])(this,t)}return Object(d["a"])(t,null,[{key:"setToken",value:function(t){localStorage.setItem("token",t)}},{key:"destroyToken",value:function(){localStorage.removeItem("token")}},{key:"getUserToken",value:function(){return localStorage.getItem("token")}},{key:"isAuth",value:function(){return null!==this.getUserToken()}}]),t}(),m={name:"SignIn",data:function(){return{password:"",email:"",showError:!1,error_data:"",isLoading:!1}},validations:{email:{required:l["required"],email:l["email"]},password:{required:l["required"],minLength:Object(l["minLength"])(6)}},methods:{submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid"):(console.log("valid"),this.isLoading=!0,this.SignIn())},SignIn:function(){var t=this;this.firebaseAuth.signInWithEmailAndPassword(this.email,this.password).then((function(e){e?t.firebaseAuth.onAuthStateChanged((function(e){e&&e.getIdToken().then((function(e){u.setToken(e),t.isLoading=!1,t.$router.push("/home/index")}))})):(t.$toasted.error("No valid user",{duration:3600,position:"top-center"}),t.isLoading=!1)})).catch((function(e){console.log(e),t.$toasted.error(e.message,{duration:3600,position:"top-center"}),t.isLoading=!1}))}}},f=m,v=a("2877"),p=Object(v["a"])(f,i,o,!1,null,"611e6d77",null),g=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("router-view")],1)},b=[],C={name:"MainApp"},_=C,$=Object(v["a"])(_,h,b,!1,null,"719c27b3",null),w=$.exports,x={name:"App",components:{MainApp:w,SignIn:g}},y=x,S=(a("034f"),Object(v["a"])(y,n,r,!1,null,null,null)),k=S.exports,I=a("8c4f"),N=a("1dce"),L=a.n(N),O=a("a65d"),R=a.n(O),q=a("0ff2"),E=a("260b"),G=(a("ea7b"),a("66ce"),a("e71f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("NavBar"),a("router-view")],1)}),j=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.isAuth?a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-dark sticky-top"},[t._m(0),t._m(1),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item active"},[a("router-link",{staticClass:"nav-link",attrs:{"active-class":"active",to:"/Home/index"}},[t._v("Home ")])],1)]),a("ul",{staticClass:"navbar-nav"},[a("li",{staticClass:"nav-item dropdown"},[a("a",{staticClass:"nav-link dropdown-toggle",attrs:{href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}}),a("div",{staticClass:"dropdown-menu dropdown-menu-right ",attrs:{"aria-labelledby":"navbarDropdown"}},[a("a",{staticClass:"dropdown-item",attrs:{href:"#"},on:{click:t.signOut}},[t._v("Log out")])])])])])]):t._e()},P=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[s("img",{staticClass:"rounded-circle img-fluid",attrs:{src:a("cf05"),width:"50",height:"50"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],T={name:"NavBar",data:function(){return{isAuth:u.isAuth()}},methods:{signOut:function(){var t=this;this.firebaseAuth.signOut().then((function(){u.destroyToken(),t.$router.push("/sign_in")})).catch((function(t){return console.log(error)}))}}},F=T,M=Object(v["a"])(F,A,P,!1,null,"4f8f9c62",null),D=M.exports,z={name:"HomePage",components:{NavBar:D}},U=z,B=Object(v["a"])(U,G,j,!1,null,"1b13506f",null),W=B.exports,H=(a("4989"),a("ab8b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row m-4"},[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item ",attrs:{"aria-current":"page"}},[t._v("Grade")]),a("li",{staticClass:"breadcrumb-item ",attrs:{"aria-current":"page"}},[t._v("Students")]),a("li",{staticClass:"breadcrumb-item ",attrs:{"aria-current":"page"}},[t._v(t._s(t.student["fullName"]))])])])]),t.isLoading?t._e():a("div",{staticClass:"row m-2"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body "},[a("div",{staticClass:"row"},[a("p",{staticClass:"col-md-6"},[a("i",{staticClass:"fas fa-graduation-cap"}),t._v(" "+t._s(t.student["fullName"]))]),a("p",{staticClass:"col-md-6"},[a("i",{staticClass:"fas fa-school"}),t._v(" "+t._s(t.student["class"])+" grade")])]),a("div",{staticClass:"row"},[a("p",{staticClass:"col-md-6"},[a("i",{staticClass:"fas fa-money-bill-wave"}),t._v(" Fees "+t._s(t.student["fees"])+" SDG")]),a("p",{staticClass:"col-md-6"},[a("i",{staticClass:"fas fa-money-bill-wave"}),t._v(" Remaining fees "+t._s(t.remainingFee)+" SDG")])])])]),t.isCreatingInstallments?t._e():a("table",{staticClass:"table table-dark mt-4"},[t._m(0),a("tbody",t._l(t.studentInstallments,(function(e){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v("1")]),a("td",[t._v(t._s(e["title"]))]),a("td",[t._v(t._s(e["fees"]))]),a("td",[a("button",{staticClass:"btn btn-outline-danger mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.deleteInstallments(e)}}},[a("i",{staticClass:"fas fa-minus"})])])])})),0)])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"installments"}},[t._v("Installments Title")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.installments.$model,expression:"$v.installments.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.$v.installments.$error,"is-valid":!t.$v.installments.$invalid},attrs:{placeholder:"March installments",id:"installments",name:"installments",type:"text"},domProps:{value:t.$v.installments.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.installments,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.installments.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Installments title required")])]),a("div",{staticClass:"form-group row  mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"fees"}},[t._v("Fee")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.fees.$model,expression:"$v.fees.$model",modifiers:{trim:!0}}],staticClass:"form-control ",class:{"is-invalid":t.$v.fees.$error,"is-valid":!t.$v.fees.$invalid},attrs:{id:"fees",placeholder:"fees",name:"Fees",type:"number"},domProps:{value:t.$v.fees.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.fees,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.fees.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Fees required")])]),a("button",{staticClass:"btn btn-primary ",attrs:{type:"submit"}},[t._v("Create Installments")])])])])])])])}),V=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Installments Title")]),a("th",{attrs:{scope:"col"}},[t._v("Installments fee")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}],J=(a("99af"),a("c975"),a("d81d"),a("96cf"),a("1da1")),K={name:"VueStudent",data:function(){return{student:{},student_id:"",studentInstallments:[],studentInstallmentsRef:[],remainingFee:0,studentsRouter:"",installments:"",fees:"",showError:!1,error_data:"",isLoading:!1,isCreatingInstallments:!1,isLoadingInstallments:!1}},validations:{installments:{required:l["required"]},fees:{required:l["required"]}},created:function(){this.getInfoById()},methods:{getInstallments:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t.isLoadingInstallments=!0,a=t.$route.params["id"],s=t.$route.params["grade_id"],e.next=6,Bt.doc("grades/".concat(s,"/students/").concat(a)).collection("installments").get();case 6:for(n=e.sent,t.studentInstallments=n.docs.map((function(t){return t.data()})),t.studentInstallmentsRef=n.docs.map((function(t){return t.ref.id})),r=0,i=0;i<t.studentInstallments.length;i++)r+=parseInt(t.studentInstallments[i]["fees"]);console.log("fk"),t.isLoadingInstallments=!1,t.remainingFee=parseInt(t.student["fees"])-r,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](0),t.isLoadingInstallments=!1;case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()},createInstallment:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.isCreatingInstallments=!0,a=t.$route.params["id"],!(t.fees<=t.remainingFee)){e.next=18;break}return e.prev=3,s=t.$route.params["grade_id"],e.next=7,Bt.doc("grades/".concat(s,"/students/").concat(a)).collection("installments").add({title:t.installments,fees:t.fees});case 7:e.sent,t.isCreatingInstallments=!1,t.getInfoById(),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](3),console.log(e.t0),t.isCreatingInstallments=!1;case 16:e.next=20;break;case 18:t.$toasted.error("Installments should be less than total fee",{duration:3600,position:"top-center"}),t.isCreatingInstallments=!1;case 20:case"end":return e.stop()}}),e,null,[[3,12]])})))()},deleteInstallments:function(t){var e=this;return Object(J["a"])(regeneratorRuntime.mark((function a(){var s,n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:s=e.studentInstallmentsRef[e.studentInstallments.indexOf(t)],n=e.$route.params["id"],r=e.$route.params["grade_id"],Bt.collection("grades/".concat(r,"/students/").concat(n,"/installments")).doc(s).delete().then((function(t){e.getInfoById()}));case 4:case"end":return a.stop()}}),a)})))()},getInfoById:function(){var t=this;this.isLoading=!0;var e=this.$route.params["id"],a=this.$route.params["grade_id"];Bt.collection("grades/".concat(a,"/students")).doc(e).get().then((function(e){var a=e.data();a["installments"]&&(t.studentInstallments=a["installments"]),t.student_id=e.id,t.student=a,t.isLoading=!1,t.getInstallments()})).catch((function(e){console.log(e),t.isLoading=!1}))},submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid"):(console.log("valid"),this.createInstallment())},createStudent:function(){}}},X=K,Q=Object(v["a"])(X,H,V,!1,null,"960b47f6",null),Y=Q.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-4 offset-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"needs-validation"},[a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"fullName"}},[t._v("Student Full Name")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.fullName.$model,expression:"$v.fullName.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.$v.fullName.$error,"is-valid":!t.$v.fullName.$invalid},attrs:{placeholder:"Full name",id:"fullName",name:"email",type:"email"},domProps:{value:t.$v.fullName.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.fullName,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.fullName.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Full name required")])]),a("div",{staticClass:"form-group row  mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"fess"}},[t._v("Fees")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.fees.$model,expression:"$v.fees.$model",modifiers:{trim:!0}}],staticClass:"form-control ",class:{"is-invalid":t.$v.fees.$error,"is-valid":!t.$v.fees.$invalid},attrs:{id:"fess",placeholder:"Fees",name:"password",type:"number"},domProps:{value:t.$v.fees.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.fees,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.fees.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Fees required")])]),a("button",{staticClass:"btn btn-outline-primary ",attrs:{type:"submit"}},[this.isLoading?a("span",{staticClass:"spinner-border text-light",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("span",[a("i",{staticClass:"fas fa-plus"}),t._v("Create Student")])])])])])])])])])},tt=[],et={name:"CreateStudent",data:function(){return{fullName:"",fees:"",showError:!1,error_data:"",isLoading:!1}},validations:{fullName:{required:l["required"]},fees:{required:l["required"]}},methods:{submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid"):(console.log("valid"),this.isLoading=!0,this.createStudent())},createStudent:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.$route.params["grade_id"],e.prev=1,e.next=4,Bt.doc("grades/".concat(a)).collection("students").add({fullName:t.fullName,fees:t.fees});case 4:return e.sent,t.isLoading=!1,e.next=8,t.$router.push("index");case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](1),t.isLoading=!1,console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))()}}},at=et,st=Object(v["a"])(at,Z,tt,!1,null,"298955e3",null),nt=st.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"5%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 offset-md-2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 offset-md-2 "},[a("button",{staticClass:"btn btn-outline-primary  mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:t.toCreate}},[a("i",{staticClass:"fas fa-plus-circle mx-1"}),t._v(" New Grade ")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8 offset-md-2"},[a("table",{staticClass:"table table-striped"},[t._m(0),a("tbody",t._l(t.grades,(function(e){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v("1")]),a("td",[t._v(t._s(e["name"]))]),a("td",[a("span",{staticClass:"p-2 badge badge-pill badge-primary"},[t._v(t._s(e["studentCount"]))])]),a("td",[a("button",{staticClass:"btn btn-outline-primary  mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.viewGradeStudents(e)}}},[a("i",{staticClass:"fas fa-eye"})])]),a("td",[a("button",{staticClass:"btn btn-outline-secondary mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.editGrade(e)}}},[a("i",{staticClass:"fas fa-edit"})])]),a("td",[a("button",{staticClass:"btn btn-outline-danger mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.deleteGrade(e)}}},[a("i",{staticClass:"fas fa-backspace"})])])])})),0)])])])])])])},it=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-dark"},[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Grade Name")]),a("th",{attrs:{scope:"col"}},[t._v("Students")]),a("th",{attrs:{scope:"col"}},[t._v("View Students")]),a("th",{attrs:{scope:"col"}},[t._v("Edit")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}],ot=(a("b0c0"),a("b85c")),lt={name:"GradesIndex",data:function(){return{grades:[],gradesRefs:[],isLoading:!1}},created:function(){this.getAllGrades()},methods:{getAllGrades:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.grades=[],e.next=3,Bt.collection("grades").get();case 3:a=e.sent,console.log(a._docs),t.gradesRefs=a.docs.map((function(t){return t.ref.id})),s=Object(ot["a"])(t.gradesRefs),e.prev=7,s.s();case 9:if((n=s.n()).done){e.next=18;break}return r=n.value,e.next=13,Bt.doc("grades/".concat(r)).collection("students").get();case 13:i=e.sent,o=a.docs[t.gradesRefs.indexOf(r)],t.grades.push({name:o.data()["name"],studentCount:i.docs?i.docs.length:0});case 16:e.next=9;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](7),s.e(e.t0);case 23:return e.prev=23,s.f(),e.finish(23);case 26:t.isLoading=!1;case 27:case"end":return e.stop()}}),e,null,[[7,20,23,26]])})))()},toCreate:function(){this.$router.push("/home/grades/create")},viewGradeStudents:function(t){var e=this.gradesRefs[this.grades.indexOf(t)];this.$router.push("".concat(e,"/students/index"))},editGrade:function(t){var e=this.gradesRefs[this.grades.indexOf(t)];this.$router.push("".concat(e,"/update"))},deleteGrade:function(t){var e=this,a=this.gradesRefs[this.grades.indexOf(t)];Bt.collection("grades").doc(a).delete().then((function(t){e.getAllGrades()}))}}},ct=lt,dt=(a("929f"),Object(v["a"])(ct,rt,it,!1,null,"5587da9c",null)),ut=dt.exports,mt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-4 offset-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"needs-validation"},[a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"gradeName"}},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.gradeName.$model,expression:"$v.gradeName.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.$v.gradeName.$error,"is-valid":!t.$v.gradeName.$invalid},attrs:{placeholder:"Grade Name",id:"gradeName",name:"gradeName",type:"text"},domProps:{value:t.$v.gradeName.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.gradeName,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.gradeName.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Required")])]),a("button",{staticClass:"btn btn-outline-primary ",attrs:{type:"submit"}},[this.isLoading?a("span",{staticClass:"spinner-border text-light",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("span",[a("i",{staticClass:"fas fa-plus mx-1"}),t._v("Create Grade")])])])])])])])])])},ft=[],vt={name:"CreateGrade",data:function(){return{gradeName:"",showError:!1,error_data:"",isLoading:!1}},validations:{gradeName:{required:l["required"]}},methods:{submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid"):(console.log("valid"),this.isLoading=!0,this.createGrade())},createGrade:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Bt.collection("grades").add({name:t.gradeName});case 3:return e.sent,t.isLoading=!1,e.next=7,t.$router.push("/home/grades/index");case 7:e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),t.isLoading=!1,console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}}},pt=vt,gt=Object(v["a"])(pt,mt,ft,!1,null,"7335441e",null),ht=gt.exports,bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"5%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"row m-4"},[a("div",{staticClass:"cold-md-10 offset-md-1"},[a("nav",{attrs:{"aria-label":"breadcrumb"}},[a("ol",{staticClass:"breadcrumb"},[a("li",{staticClass:"breadcrumb-item ",attrs:{"aria-current":"page"}},[t._v("Grades")]),a("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v(t._s(t.grade["name"]))])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10 offset-md-1"},[a("div",{staticClass:"row m-3"},[a("button",{staticClass:"btn btn-outline-primary   mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:t.toCreate}},[a("i",{staticClass:"fas fa-user-plus"}),t._v(" New Student ")])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1 "}),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"my-card"},[a("i",{staticClass:"fas fa-user-graduate",staticStyle:{"font-size":"xx-large"}}),a("br"),a("p",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.paidStudent.length)+" Student")]),t._m(0)])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"my-card"},[a("i",{staticClass:"fas fa-user-graduate",staticStyle:{"font-size":"xx-large"}}),a("br"),a("p",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.partiallyPaidStudents.length)+" Student")]),t._m(1)])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"my-card"},[a("i",{staticClass:"fas fa-user-graduate",staticStyle:{"font-size":"xx-large"}}),a("br"),a("p",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.notPaidStudents.length)+" Student")]),t._m(2)])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"my-card"},[a("i",{staticClass:"fas fa-wallet",staticStyle:{"font-size":"xx-large"}}),a("br"),a("p",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.totalMoney)+" SDG")]),t._m(3)])]),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"my-card"},[a("i",{staticClass:"fas fa-wallet",staticStyle:{"font-size":"xx-large"}}),a("br"),a("p",{staticStyle:{"font-size":"large"}},[t._v(t._s(t.totalInstallmentMoney)+" SDG")]),t._m(4)])]),a("div",{staticClass:"col-md-1 "})]),a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-md-10 offset-md-1"},[a("form",{staticClass:"form-inline my-2 my-lg-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchWord,expression:"searchWord"}],staticClass:"form-control mr-sm-2",staticStyle:{width:"80%"},attrs:{type:"search",placeholder:"Search","aria-label":"Search"},domProps:{value:t.searchWord},on:{input:function(e){e.target.composing||(t.searchWord=e.target.value)}}}),t.students.length>0?a("button",{staticClass:"btn btn-outline-success mx-1",attrs:{type:"submit"},on:{click:t.search}},[a("i",{staticClass:"fas fa-search"}),t._v(" Search ")]):t._e(),a("button",{staticClass:"btn btn-outline-secondary my-2 mx-1",attrs:{type:"submit"},on:{click:t.getAllStudents}},[a("i",{staticClass:"fas fa-times"})])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10 offset-md-1"},[a("table",{staticClass:"table table-striped table-dark"},[t._m(5),a("tbody",t._l(t.students,(function(e,s){return a("tr",[a("th",{attrs:{scope:"row"}},[t._v(t._s(s+=1))]),a("td",[t._v(t._s(e["fullName"]))]),a("td",[t._v(t._s(e["class"])+"grade")]),a("td",[t._v(t._s(e["fees"])+" SDG")]),a("td",[a("button",{staticClass:"btn btn-outline-primary  mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.viewStudent(e)}}},[a("i",{staticClass:"fas fa-eye"})])]),a("td",[a("button",{staticClass:"btn btn-outline-danger mb-3 align-content-lg-start",attrs:{type:"button"},on:{click:function(a){return t.deleteStudent(e)}}},[a("i",{staticClass:"fas fa-user-minus"})])])])})),0)])])])])])])},Ct=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mark"},[a("i",{staticClass:"far fa-check-circle mx-1"}),t._v(" Fully paid")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"markWarning"},[a("i",{staticClass:"far fa-clock mx-1"}),t._v("Partially paid")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"markRed"},[a("i",{staticClass:"fas fa-user-times mx-1"}),t._v("Not paid")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mark"},[a("i",{staticClass:"fas fa-money-bill-alt mx-1"}),t._v("Total Cash")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{staticClass:"mark"},[a("i",{staticClass:"fas fa-money-bill-alt mx-1"}),t._v("Total Installment")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Student Full Name")]),a("th",{attrs:{scope:"col"}},[t._v("Class")]),a("th",{attrs:{scope:"col"}},[t._v("Study fees")]),a("th",{attrs:{scope:"col"}},[t._v("View")]),a("th",{attrs:{scope:"col"}},[t._v("Delete")])])])}],_t=(a("4de4"),{name:"HomeIndex",data:function(){return{students:[],searchWord:"",studentsRefs:[],paidStudent:[],partiallyPaidStudents:[],notPaidStudents:[],totalMoney:0,totalInstallmentMoney:0,grade:{},isLoading:!1}},created:function(){this.getGradeInfo()},methods:{search:function(){var t=this;this.students=this.students.filter((function(e){return e.fullName.toLowerCase().indexOf(t.searchWord.toLowerCase())>=0}))},getGradeInfo:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$route.params["grade_id"],t.isLoading=!0,Bt.collection("grades").doc(a).get().then((function(e){t.grade=e.data(),t.getAllStudents()})).catch((function(e){console.log(e),t.isLoading=!1}));case 3:case"end":return e.stop()}}),e)})))()},getTotalInstallment:function(t){console.log(t);for(var e=0,a=0;a<t.length;a++)e+=parseFloat(t[a].data()["fees"]);return e},getAllStudents:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a,s,n,r,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.students=[],t.paidStudent=[],t.notPaidStudents=[],t.partiallyPaidStudents=[],t.totalMoney=0,t.totalInstallmentMoney=0,a=t.$route.params["grade_id"],e.next=9,Bt.doc("grades/".concat(a)).collection("students").get();case 9:s=e.sent,t.studentsRefs=s.docs.map((function(t){return t.ref.id})),n=0;case 12:if(!(n<t.studentsRefs.length)){e.next=29;break}return e.next=15,Bt.doc("grades/".concat(a,"/students/").concat(t.studentsRefs[n])).collection("installments").get();case 15:r=e.sent,console.log(r.docs.length),i=t.getTotalInstallment(r.docs),t.totalInstallmentMoney+=i,console.log(i),o=s.docs[n].data(),console.log(o),l=parseFloat(o["fees"]),0===i?t.notPaidStudents.push(o):i>0&&i<l?t.partiallyPaidStudents.push(o):i===l&&t.paidStudent.push(o),t.totalMoney+=l,t.students.push(o);case 26:n++,e.next=12;break;case 29:t.isLoading=!1;case 30:case"end":return e.stop()}}),e)})))()},toCreate:function(){this.$router.push("create")},viewStudent:function(t){var e=this.studentsRefs[this.students.indexOf(t)];this.$router.push("".concat(e,"/view"))},deleteStudent:function(t){var e=this,a=this.$route.params["grade_id"],s=this.studentsRefs[this.students.indexOf(t)];Bt.collection("grades/".concat(a,"/students")).doc(s).delete().then((function(t){e.getAllStudents()}))}}}),$t=_t,wt=(a("95b5"),Object(v["a"])($t,bt,Ct,!1,null,"36bf776d",null)),xt=wt.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row mt-4"},[a("div",{staticClass:"col-md-4 offset-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"needs-validation"},[a("form",{staticClass:"needs-validation",attrs:{novalidate:""},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[a("div",{staticClass:"form-group row mx-2"},[a("label",{staticClass:"form-label ",attrs:{for:"gradeName"}},[t._v("New Name")]),a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.$v.gradeName.$model,expression:"$v.gradeName.$model",modifiers:{trim:!0}}],staticClass:"form-control",class:{"is-invalid":t.$v.gradeName.$error,"is-valid":!t.$v.gradeName.$invalid},attrs:{placeholder:"Grade Name",id:"gradeName",name:"gradeName",type:"text"},domProps:{value:t.$v.gradeName.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.gradeName,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.$v.gradeName.required?t._e():a("p",{staticClass:"invalid-feedback"},[t._v("Required")])]),a("button",{staticClass:"btn btn-outline-primary ",attrs:{type:"submit"}},[this.isLoading?a("span",{staticClass:"spinner-border text-light",attrs:{role:"status"}},[a("span",{staticClass:"sr-only"},[t._v("Loading...")])]):a("span",[a("i",{staticClass:"fas fa-plus mx-1"}),t._v("Update Grade")])])])])])])])])])},St=[],kt={name:"UpdateGrade",data:function(){return{gradeName:"",showError:!1,error_data:"",isLoading:!1}},validations:{gradeName:{required:l["required"]}},created:function(){this.getGradeInfo()},methods:{getGradeInfo:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=t.$route.params["grade_id"],t.isLoading=!0,Bt.collection("grades").doc(a).get().then((function(e){var a=e.data();t.gradeName=a["name"],t.isLoading=!1})).catch((function(e){console.log(e),t.isLoading=!1}));case 3:case"end":return e.stop()}}),e)})))()},submit:function(){this.$v.$touch(),this.$v.$invalid?console.log("invalid"):(console.log("valid"),this.isLoading=!0,this.updateGrade())},updateGrade:function(){var t=this;return Object(J["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.$route.params["grade_id"],e.next=4,Bt.collection("grades").doc(a).set({name:t.gradeName});case 4:return e.sent,t.isLoading=!1,e.next=8,t.$router.push("/home/grades/index");case 8:e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),t.isLoading=!1,console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},It=kt,Nt=Object(v["a"])(It,yt,St,!1,null,"05b566e4",null),Lt=Nt.exports,Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},Rt=[],qt={name:"GradesMain"},Et=qt,Gt=Object(v["a"])(Et,Ot,Rt,!1,null,"22d3ca1b",null),jt=Gt.exports,At=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},Pt=[],Tt={name:"StudentMainPage"},Ft=Tt,Mt=Object(v["a"])(Ft,At,Pt,!1,null,"0eef732e",null),Dt=Mt.exports;s["a"].use(I["a"]),s["a"].use(q["a"]),s["a"].use(L.a),s["a"].use(R.a),s["a"].config.productionTip=!1;var zt={apiKey:"AIzaSyDR-iV1XVBwsQ17p9FsXEhwxL4vKqrIgHM",authDomain:"scoolapp-add72.firebaseapp.com",projectId:"scoolapp-add72",storageBucket:"scoolapp-add72.appspot.com",messagingSenderId:"885231144399",appId:"1:885231144399:web:71fb884ca924235f4296ba",measurementId:"G-JG90RKT2RN"},Ut=E["a"].initializeApp(zt);s["a"].prototype.firebase=E["a"],s["a"].prototype.firebaseDb=Ut.database(),s["a"].prototype.firebaseAuth=Ut.auth();var Bt=Ut.firestore(),Wt=E["a"].firestore,Ht=Wt.TimeStamp,Vt=Wt.GeoPoint;Bt.settings({timestampsInSnapshots:!0});var Jt=[{path:"/home",component:W,children:[{path:"grades",component:jt,meta:{requiresAuth:!0},children:[{path:"index",component:ut,meta:{requiresAuth:!0}},{path:"create",component:ht,meta:{requiresAuth:!0}},{path:":grade_id/update",component:Lt,meta:{requiresAuth:!0}},{path:":grade_id/students",component:Dt,meta:{requiresAuth:!0},children:[{path:"index",component:xt,meta:{requiresAuth:!0}},{path:"create",component:nt,meta:{requiresAuth:!0}},{path:":id/view",component:Y,meta:{requiresAuth:!0}}]}]}]},{path:"/sign_in",component:g},{path:"*",component:g}],Kt=new I["a"]({routes:Jt,linkActiveClass:"active"});Kt.beforeEach((function(t,e,a){var s=t.matched.some((function(t){return t.meta.requiresAuth}));s?u.isAuth()?a():a("/sign_in"):u.isAuth()?a("/home/grades/index"):a()})),new s["a"]({router:Kt,render:function(t){return t(k)}}).$mount("#app")},"82cf":function(t,e,a){},"85ec":function(t,e,a){},"929f":function(t,e,a){"use strict";a("0438")},"95b5":function(t,e,a){"use strict";a("82cf")},cf05:function(t,e,a){t.exports=a.p+"img/logo.a98e8071.png"}});
//# sourceMappingURL=app.9476119b.js.map